---
# Install and configure KDE Plasma desktop environment

- name: Install KDE Plasma and essential components
  pacman:
    name:
      - plasma-meta          # KDE Plasma desktop
      - plasma-wayland-session  # Wayland session support
      - kde-applications-meta   # KDE applications bundle
      - sddm                 # Display manager
      - sddm-kcm            # SDDM KDE configuration module
    state: present
  become: yes

- name: Enable SDDM display manager
  systemd:
    name: sddm
    enabled: yes
  become: yes

- name: Install additional KDE utilities
  pacman:
    name:
      - konsole             # Terminal emulator
      - dolphin             # File manager
      - kate                # Text editor
      - spectacle           # Screenshot utility
      - gwenview            # Image viewer
      - ark                 # Archive manager
    state: present
  become: yes
